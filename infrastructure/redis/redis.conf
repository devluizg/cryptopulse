# ===========================================
# CryptoPulse - Redis Configuration
# ===========================================

# Bind em todas as interfaces (dentro do container)
bind 0.0.0.0

# Porta padrão
port 6379

# Proteção (desabilitada pois está em rede interna Docker)
protected-mode no

# Persistência - RDB Snapshots
save 900 1
save 300 10
save 60 10000

# Diretório de dados
dir /data

# Nome do arquivo RDB
dbfilename dump.rdb

# Compressão do RDB
rdbcompression yes

# Checksum do RDB
rdbchecksum yes

# AOF - Append Only File (mais durável)
appendonly yes
appendfilename "appendonly.aof"
appendfsync everysec

# Memória máxima (256MB para dev)
maxmemory 256mb

# Política quando atingir memória máxima
# volatile-lru: remove keys com TTL usando LRU
maxmemory-policy volatile-lru

# Logs
loglevel notice

# Timeout de conexões idle (0 = sem timeout)
timeout 0

# TCP keepalive
tcp-keepalive 300

# Número máximo de clientes
maxclients 100

# ===========================================
# Configurações específicas para CryptoPulse
# ===========================================

# Databases disponíveis (0-15)
# DB 0: Cache de dados de mercado
# DB 1: Cache de scores
# DB 2: Filas de jobs
# DB 3: Sessions/misc
databases 16
